<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="本文目标：  更加深入的理解和掌握泛型 更加熟练这些内置工具类型在项目中的运用  ExcludeExclude&lt;T, U&gt;：作用简单说就是把 T 里面的 U 去掉，再返回 T 里还剩下的。T 和 U 必须是同种类型(具体类型&#x2F;字面量类型)。如下 12345678type T1 &#x3D; Exclude&lt;string | number, string&gt;;&#x2F;&#x2F; type T">
<meta property="og:type" content="article">
<meta property="og:title" content="Typescript 泛型">
<meta property="og:url" content="https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/index.html">
<meta property="og:site_name" content="Jamison&#39;s blogs">
<meta property="og:description" content="本文目标：  更加深入的理解和掌握泛型 更加熟练这些内置工具类型在项目中的运用  ExcludeExclude&lt;T, U&gt;：作用简单说就是把 T 里面的 U 去掉，再返回 T 里还剩下的。T 和 U 必须是同种类型(具体类型&#x2F;字面量类型)。如下 12345678type T1 &#x3D; Exclude&lt;string | number, string&gt;;&#x2F;&#x2F; type T">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/630dae77a48949ab9ad55b90613537f8~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">
<meta property="article:published_time" content="2023-07-08T04:17:39.000Z">
<meta property="article:modified_time" content="2026-01-30T12:30:29.372Z">
<meta property="article:author" content="Jamsion Dong">
<meta property="article:tag" content="Typescript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/630dae77a48949ab9ad55b90613537f8~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">
    
    
      
        
          <link rel="shortcut icon" href="../../../../images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="../../../../images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="../../../../images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Typescript 泛型</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="../../../../css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="顶部" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="../../../../index.html">首页</a></li><!--
     --><!--
       --><li><a href="../../../../about/">关于</a></li><!--
     --><!--
       --><li><a href="../../../../archives/">归档</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/JamisonDong">项目</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="上一篇" href="../TS%E5%9F%BA%E7%A1%80/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="下一篇" href="../Vue2Study_1/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="分享文章" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&text=Typescript 泛型"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&title=Typescript 泛型"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&is_video=false&description=Typescript 泛型"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Typescript 泛型&body=Check out this article: https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&title=Typescript 泛型"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&title=Typescript 泛型"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&title=Typescript 泛型"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&title=Typescript 泛型"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&name=Typescript 泛型&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&t=Typescript 泛型"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Exclude"><span class="toc-number">1.</span> <span class="toc-text">Exclude</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Extract"><span class="toc-number">2.</span> <span class="toc-text">Extract</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Omit"><span class="toc-number">3.</span> <span class="toc-text">Omit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pick"><span class="toc-number">4.</span> <span class="toc-text">Pick</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E4%B8%80"><span class="toc-number">5.</span> <span class="toc-text">练习一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Record"><span class="toc-number">6.</span> <span class="toc-text">Record</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Partial"><span class="toc-number">7.</span> <span class="toc-text">Partial</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Required"><span class="toc-number">8.</span> <span class="toc-text">Required</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Readonly"><span class="toc-number">9.</span> <span class="toc-text">Readonly</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E4%BA%8C"><span class="toc-number">10.</span> <span class="toc-text">练习二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NonNullable"><span class="toc-number">11.</span> <span class="toc-text">NonNullable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E4%B8%89"><span class="toc-number">12.</span> <span class="toc-text">练习三</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Awaited"><span class="toc-number">13.</span> <span class="toc-text">Awaited</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parameters"><span class="toc-number">14.</span> <span class="toc-text">Parameters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ReturnType"><span class="toc-number">15.</span> <span class="toc-text">ReturnType</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ConstructorParameters-InstanceType"><span class="toc-number">16.</span> <span class="toc-text">ConstructorParameters&#x2F;InstanceType</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Uppercase-Lowercase"><span class="toc-number">17.</span> <span class="toc-text">Uppercase&#x2F;Lowercase</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Capitalize-Uncapitalize"><span class="toc-number">18.</span> <span class="toc-text">Capitalize&#x2F;Uncapitalize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E5%9B%9B"><span class="toc-number">19.</span> <span class="toc-text">练习四</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E7%BB%83%E4%B9%A0"><span class="toc-number">20.</span> <span class="toc-text">综合练习</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">21.</span> <span class="toc-text">参考资料</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Typescript 泛型
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">Jamsion Dong</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-07-08T04:17:39.000Z" class="dt-published" itemprop="datePublished">2023-07-08</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="../../../../categories/%E8%AF%AD%E8%A8%80/">语言</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="../../../../tags/Typescript/" rel="tag">Typescript</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p>本文目标：</p>
<ul>
<li>更加深入的理解和掌握泛型</li>
<li>更加熟练这些内置工具类型在项目中的运用</li>
</ul>
<h3 id="Exclude"><a href="#Exclude" class="headerlink" title="Exclude"></a>Exclude</h3><p><code>Exclude&lt;T, U&gt;</code>：作用简单说就是把 <code>T</code> 里面的 <code>U</code> 去掉，再返回 <code>T</code> 里还剩下的。<code>T</code> 和 <code>U</code> 必须是同种类型(具体类型&#x2F;字面量类型)。如下</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Exclude</span>&lt;<span class="built_in">string</span> | <span class="built_in">number</span>, <span class="built_in">string</span>&gt;;</span><br><span class="line"><span class="comment">// type T1  = number; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 上面这个肯定一看就懂，那下面这样呢</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">Exclude</span>&lt;<span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span> | <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;b&#x27;</span> | <span class="string">&#x27;d&#x27;</span>&gt;;</span><br><span class="line"><span class="comment">// type T2  = &#x27;a&#x27; | &#x27;c&#x27;;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>怎么就剩个 <code>a | c</code> 了？这怎么执行的？</p>
<p>先看一张图</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/630dae77a48949ab9ad55b90613537f8~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="75c8b9738b63d4720d84d39eca8edc6.png"></p>
<p>三元表达式大家都知道，不是返回 <code>a</code> 就是返回 <code>b</code>，这么算的话，这个 <code>some</code> 的类型应该是 <code>b</code> 才对呀，可这个结果是 <code>a | b</code> 又是怎么回事呢，这都是由于 <code>TS</code> 中的<strong>拆分</strong>或者说叫<strong>分发</strong>机制导致的</p>
<p>简单说就是<strong>联合类型并且是裸类型就会产生分发，分发就会把联合类型中的每一个类型单独拿去判断，最后返回结果组成的联合类型</strong>，<code>a | b</code> 就是这么来的，这个特性在本文后面会提到多次所以铺垫一下，这也是为什么反 <code>Exclude</code> 放在开头的原因</p>
<p>结合 <code>Exclude</code> 的实现和例子来理解下</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 源码定义</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Exclude</span>&lt;T, U&gt; = T <span class="keyword">extends</span> U ? <span class="built_in">never</span> : T;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 例子</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">Exclude</span>&lt;<span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span> | <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;b&#x27;</span> | <span class="string">&#x27;d&#x27;</span>&gt;;</span><br><span class="line"><span class="comment">// type T2  = &#x27;a&#x27; | &#x27;c&#x27;;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>上面例子中的执行逻辑：</p>
<ul>
<li>由于分发会把联合类型中的每一个类型单独拿去判断的原因，会先把 <code>T</code> ，也就是前面 <code>a | b | c</code> 给拆分再单独放入 <code>T extends U ? never : T</code> 判断</li>
<li>第一次判断 <code>a(T就是a) </code> ，<code>U</code> 就是 <code>b | d</code> ，<code>T</code> 并没有继承自 <code>U</code>，判断为假，返回 <code>T</code> 也就是 <code>a</code></li>
<li>第二次判断放入 <code>b</code> 判断为真，返回 <code>never</code>，<code>ts</code> 中的 <code>never</code> 我们知道就是不存在值的意思，连 <code>undefined</code> 都没有，所以 <code>never</code> 会被忽略，不会产生任何效果</li>
<li>第三次判断放入 <code>c</code>，判断为假，和 <code>a</code> 同理</li>
<li>最后<strong>将每一个单独判断的结果组成联合类型返回</strong>，<code>never</code> 会忽略，所以就剩下 <code>a | c</code></li>
</ul>
<blockquote>
<p>总之就是：如果 <code>T extends U</code>  满足分发的条件，就会把所有单个类型依次放入判断，最后返回记录的结果组合的联合类型</p>
</blockquote>
<h3 id="Extract"><a href="#Extract" class="headerlink" title="Extract"></a>Extract</h3><p><code>Extract&lt;T, U&gt;</code>：作用是取出 <code>T</code> 里面的 <code>U</code> ，返回。作用和 <code>Exclude</code> 刚好相反，传参也是一样的</p>
<p>看例子理解 <code>Extract</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Extract</span>&lt;<span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span> | <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;d&#x27;</span>&gt;;</span><br><span class="line"><span class="comment">// type T1  = &#x27;a&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 源码定义</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Extract</span>&lt;T, U&gt; = T <span class="keyword">extends</span> U ? T : <span class="built_in">never</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>和 <code>Exclude</code> 源码对比也只是三元表达式返回的 never : T 对调了一下，执行原理也是一样一样儿的，就不重复了</p>
<h3 id="Omit"><a href="#Omit" class="headerlink" title="Omit"></a>Omit</h3><p><code>Omit&lt;T, K&gt;</code>：作用是把 <code>T(对象类型)</code> 里边的 <code>K</code> 去掉，返回 <code>T</code> 里还剩下的</p>
<p><code>Omit</code> 的作用和 <code>Exclude</code> 是一样的，都能做类型过滤并得到新类型。</p>
<p>不同的是 <code>Exclude</code> 主要是处理联合类型，且会触发分发，而 <code>Omit</code> 主要是处理对象类型，所以自然的这俩参数也不一样。</p>
<p>用法如下</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这种场景 type 和 interface 是一样的，后面就不重复说明了</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Omit</span>&lt;<span class="title class_">User</span>, <span class="string">&#x27;age&#x27;</span>&gt;</span><br><span class="line"><span class="comment">// type T1 = &#123; name: string &#125;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>源码定义</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// keyof any 就是 string | number | symbol</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Omit</span>&lt;T, K <span class="keyword">extends</span> keyof <span class="built_in">any</span>&gt; = &#123; [P <span class="keyword">in</span> <span class="title class_">Exclude</span>&lt;keyof T, K&gt;]: T[P]; &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>首先第一个参数 <code>T</code> 要传对象类型， <code>type</code> 或 <code>interface</code> 都可以</li>
<li>第二个参数 <code>K</code> 限制了类型只能是 <code>string | number | symbol</code>，这一点跟 <code>js</code> 里的对象是一个意思，对象类型的属性名只支持这三种类型</li>
<li><code>in</code> 是映射类型，用来映射遍历枚举类型。大白话就是循环、循环语法，需要配合联合类型来对类型进行遍历。<code>in</code> 的右边是可遍历的枚举类型，左边是遍历出来的每一项</li>
<li>用 <code>Exclude</code> 去除掉传入的属性后，再遍历剩下的属性，生成新的类型返回</li>
</ul>
<p>示例解析：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">gender</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Omit</span>&lt;T, K <span class="keyword">extends</span> keyof <span class="built_in">any</span>&gt; = &#123; [P <span class="keyword">in</span> <span class="title class_">Exclude</span>&lt;keyof T, K&gt;]: T[P]; &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Omit</span>&lt;<span class="title class_">User</span>, <span class="string">&#x27;age&#x27;</span>&gt;</span><br><span class="line"><span class="comment">// type T1 = &#123; name: string, gender: string &#125;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>我们调用 <code>Omit</code> 传入的参数是正确的，所以就分析一下后面的执行逻辑：</p>
<ul>
<li><code>Exclude&lt;keyof T, K&gt;</code> 等于 <code>Exclude&lt;&#39;name&#39;|&#39;age&#39;|&#39;gender&#39;, &#39;age&#39;&gt;</code>，返回的结果就是 <code>&#39;name&#39;|&#39;gender</code></li>
<li>然后遍历 <code>&#39;name&#39;|&#39;gender&#39;</code>，第一次循环 <code>P</code> 就是 <code>name</code>，返回 <code>T[P]</code> 就是 <code>User[&#39;name&#39;]</code></li>
<li>第二次循环 <code>P</code> 就是 <code>gender</code>，返回 <code>T[P]</code> 就是 <code>User[&#39;gender&#39;]</code>，然后循环结束</li>
<li>结果就是 <code>&#123; name: string, gender: string &#125;</code></li>
</ul>
<h3 id="Pick"><a href="#Pick" class="headerlink" title="Pick"></a>Pick</h3><p><code>Pick&lt;T, K&gt;</code> ：作用是取出 <code>T(对象类型)</code> 里边儿的 <code>K</code>，返回。</p>
<p>好像和 <code>Omit</code> 刚好相反，<code>Omit</code> 是不要 <code>K</code> ，<code>Pick</code> 是只要 <code>K</code></p>
<p>传参方式和 <code>Omit</code> 是一样的，就不赘述了，用法示例：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">gender</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">User</span>, <span class="string">&#x27;name&#x27;</span> | <span class="string">&#x27;gender&#x27;</span>&gt;</span><br><span class="line"><span class="comment">// type T1 = &#123; name: string, gender: string &#125;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>源码定义</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Pick</span>&lt;T, K <span class="keyword">extends</span> keyof T&gt; = &#123; [P <span class="keyword">in</span> K]: T[P]; &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li>可以看到等号左边做了泛型约束，限制了第二个参数 <code>K</code> 必须是第一个参数 <code>T</code> 里的属性。</li>
<li>如果第二个参数传入联合类型，会触发分发，以此来确保准确性，联合类型中的每一个单独类型都必须是第一个对象类型中的属性(不限制的话右边就要出错了)</li>
<li>参数都正确之后，等号右边的逻辑其实就是和 <code>Omit</code> 一模一样的了，直接遍历 <code>K</code>，取出返回就完事儿了</li>
</ul>
<h3 id="练习一"><a href="#练习一" class="headerlink" title="练习一"></a>练习一</h3><p>请利用本文上述内容完成：基于如下类型，实现一个去掉了 <code>gender</code> 的新类型，实现方法越多越好</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">gender</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>这个？</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = &#123; <span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span> &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>？？？</p>
<p>我写了几个，欢迎补充：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Omit</span>&lt;<span class="title class_">User</span>, <span class="string">&#x27;gender&#x27;</span>&gt;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">User</span>, <span class="string">&#x27;name&#x27;</span> | <span class="string">&#x27;age&#x27;</span>&gt;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T3</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">User</span>, <span class="title class_">Exclude</span>&lt;keyof <span class="title class_">User</span>, <span class="string">&#x27;gender&#x27;</span>&gt;&gt;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T4</span> = &#123; [P <span class="keyword">in</span> <span class="string">&#x27;name&#x27;</span> | <span class="string">&#x27;age&#x27;</span>] : <span class="title class_">User</span>[P] &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T5</span> = &#123; [P <span class="keyword">in</span> <span class="title class_">Exclude</span>&lt;keyof <span class="title class_">User</span>, <span class="string">&#x27;gender&#x27;</span>&gt;] : <span class="title class_">User</span>[P] &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="Record"><a href="#Record" class="headerlink" title="Record"></a>Record</h3><p><code>Record&lt;K, T&gt;</code>：作用是自定义一个对象。<code>K</code> 为对象的 <code>key</code> 或 <code>key</code> 的类型，<code>T</code> 为 <code>value</code> 或 <code>value</code> 的类型。</p>
<p>你有没有这样用过 ↓</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">obj</span>:<span class="built_in">any</span> = &#123;&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>反正我有，其实用 <code>Record</code> 定义对象，在工作中还是很好用的，而且非常灵活，不同的对象定义上也会有一点区别，如下</p>
<p><strong>空对象</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// never，会限制为空对象</span></span><br><span class="line"><span class="comment">// any 指的是 string | number | symbol 这几个类型都行</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Record</span>&lt;<span class="built_in">any</span>, <span class="built_in">never</span>&gt;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj1</span>:<span class="variable constant_">T1</span> = &#123;&#125; 	<span class="comment">// ok</span></span><br><span class="line"><span class="comment">// let obj1:T1 = &#123;a:1&#125; 这样不行，只能是空对象</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>任意对象</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 任意对象，unknown 或 &#123;&#125; 表示对象内容不限，空对象也行</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Record</span>&lt;<span class="built_in">any</span>, <span class="built_in">unknown</span>&gt;</span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Record</span>&lt;<span class="built_in">any</span>, &#123;&#125;&gt;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj2</span>:<span class="variable constant_">T1</span> = &#123;&#125; 	<span class="comment">// ok</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj3</span>:<span class="variable constant_">T1</span> = &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;  <span class="comment">// ok</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>自定义对象 key</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> keys = <span class="string">&#x27;name&#x27;</span> | <span class="string">&#x27;age&#x27;</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Record</span>&lt;keys, <span class="built_in">string</span>&gt;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj1</span>:<span class="variable constant_">T1</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;沐华&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;18&#x27;</span></span><br><span class="line">    <span class="comment">// age: 18  报错，第二个参数 string 表示 value 值都只能是 string 类型</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果需要 value 是任意类型，下面两个都行</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">Record</span>&lt;keys, <span class="built_in">unknown</span>&gt;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T3</span> = <span class="title class_">Record</span>&lt;keys, &#123;&#125;&gt;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>自定义对象 value</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> keys = <span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span></span><br><span class="line"><span class="comment">// type 或 interface 都一样</span></span><br><span class="line"><span class="keyword">type</span> values&lt;T&gt; = &#123;</span><br><span class="line">    <span class="attr">name</span>?: T,</span><br><span class="line">    <span class="attr">age</span>?: T,</span><br><span class="line">    <span class="attr">gender</span>?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义 value 类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Record</span>&lt;keys, values&lt;<span class="built_in">number</span> | <span class="built_in">string</span>&gt;&gt;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj</span>:<span class="variable constant_">T1</span> = &#123;</span><br><span class="line">    <span class="attr">a</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;沐华&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">b</span>: &#123; <span class="attr">age</span>: <span class="number">18</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 固定 value 值</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">Record</span>&lt;keys, <span class="number">111</span>&gt;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">obj1</span>:<span class="variable constant_">T2</span> = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">111</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">111</span></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>源码定义</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Record</span>&lt;K <span class="keyword">extends</span> <span class="built_in">any</span>, T&gt; = &#123; [P <span class="keyword">in</span> K]: T; &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>左边限制了第一个参数 <code>K</code> 只能是 <code>string | number | symbol</code> 类型，可以是联合类型，因为右边遍历 <code>K</code> 了，然后遍历出来的每个属性的值，直接赋值为传入的第二个参数</p>
<h3 id="Partial"><a href="#Partial" class="headerlink" title="Partial"></a>Partial</h3><p><code>Partial&lt;T&gt;</code>：作用生成一个将 <code>T(对象类型)</code> 里所有属性都变成可选的之后的新类型</p>
<p>示例如下：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">User</span>&gt;</span><br><span class="line"><span class="comment">// 简单说 T1 和 T2 是一模一样的</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>?: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>源码定义</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Partial</span>&lt;T&gt; = &#123; [P <span class="keyword">in</span> keyof T]?: T[P]; &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>这下看源码定义的是不是特别简单，就是循环传进来的对象类型，给每个属性加个 <code>?</code> 变成可选属生</p>
<h3 id="Required"><a href="#Required" class="headerlink" title="Required"></a>Required</h3><p><code>Required&lt;T&gt;</code>：作用和 <code>Partial&lt;T&gt;</code> 刚好相反，<code>Partial</code> 是返回所有属性都是<strong>非必填</strong>的对象类型，而 <code>Required</code> 则是返回所有属性都是<strong>必填项</strong>的对象类型。参数 <code>T</code> 也是一个对象类型。</p>
<p>示例：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>?: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Required</span>&lt;<span class="title class_">User</span>&gt;</span><br><span class="line"><span class="comment">// 简单说 T1 和 T2 是一模一样的</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>源码定义</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Required</span>&lt;T&gt; = &#123; [P <span class="keyword">in</span> keyof T]-?: T[P]; &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>和 <code>Partial</code> 的源码定义相比基本一样的，只是这里多了个减号 <code>-</code>，没错，就是减去的意思，<code>-?</code> 就是去掉 <code>?</code>，然后就变成必填项了，这样解释是不是很好理解</p>
<h3 id="Readonly"><a href="#Readonly" class="headerlink" title="Readonly"></a>Readonly</h3><p><code>Readonly&lt;T&gt;</code> ：作用是返回一个所有属性都是只读不可修改的对象类型，与 <code>Partial</code> 和 <code>Required</code> 是非常相似的。参数 <code>T</code> 也是一个对象类型。</p>
<p>示例：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Readonly</span>&lt;<span class="title class_">User</span>&gt;</span><br><span class="line"><span class="comment">// 简单说 T1 和 T2 是一模一样的</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = &#123;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">age</span>?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Readonly</span>&lt;T&gt; = &#123; <span class="keyword">readonly</span> [P <span class="keyword">in</span> keyof T]: T[P]; &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>怎么样？看到这是不是越发觉得源码的类型定义越看越简单了</p>
<p>我：那是不是说把所有只读类型，全都变成非只读就只需要 <code>-readonly</code> 就行了？</p>
<p>你：是的，说得很对，就是这样的</p>
<h3 id="练习二"><a href="#练习二" class="headerlink" title="练习二"></a>练习二</h3><p>从上面几个工具类型的源码定义中我们可以发现，都只是简单的一层遍历，就好像 <code>js</code> 中的浅拷贝，比如有下面这样一个对象</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">children</span>: &#123;</span><br><span class="line">        <span class="attr">boy</span>: <span class="built_in">number</span></span><br><span class="line">        <span class="attr">girl</span>: <span class="built_in">number</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>要把这样一个对象所有属性都改成可选属性，用 <code>Partial</code> 就行不通了，它只能改变第一层，<code>children</code> 里的所有属性都改不了，所以请写一个可以实现的类型，功能类似深拷贝的意思</p>
<p>先稍微想想再往下看答案哟</p>
<p>写出来一个的话，<code>Partial</code> 、<code>Required</code> 、 <code>Readonly</code> 的 “深拷贝” 类型是不是就都有了呢</p>
<p>想一下</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Partial 源码定义</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Partial</span>&lt;T&gt; = &#123; [P <span class="keyword">in</span> keyof T]?: T[P]; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归 Partial</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DeepPartial</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="built_in">object</span> ? &#123; [P <span class="keyword">in</span> keyof T]?: <span class="title class_">DeepPartial</span>&lt;T[P]&gt; &#125;:T;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>外层再加了一个三元表达式，如果不是对象类型直接返回，如果是就遍历；然后属性值改成递归调用就可以了</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 递归 Required</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DeepRequired</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="built_in">object</span> ? &#123; [P <span class="keyword">in</span> keyof T]-?: <span class="title class_">DeepRequired</span>&lt;T[P]&gt; &#125;:T;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归 Readonly</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DeepReadonly</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="built_in">object</span> ? &#123; <span class="keyword">readonly</span> [P <span class="keyword">in</span> keyof T]: <span class="title class_">DeepReadonly</span>&lt;T[P]&gt; &#125;:T;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="NonNullable"><a href="#NonNullable" class="headerlink" title="NonNullable"></a>NonNullable</h3><p><code>NonNullable&lt;T&gt;</code>：作用是去掉 <code>T</code> 中的 <code>null</code> 和 <code>undefined</code>。<code>T</code> 为字面量&#x2F;具体类型的联合类型，如果是对象类型是没有效果的。如下</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">NonNullable</span>&lt;<span class="built_in">string</span> | <span class="built_in">number</span> | <span class="literal">undefined</span>&gt;;</span><br><span class="line"><span class="comment">// type T1 = string | number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">NonNullable</span>&lt;<span class="built_in">string</span>[] | <span class="literal">null</span> | <span class="literal">undefined</span>&gt;;    </span><br><span class="line"><span class="comment">// type T2 = string[]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T3</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T4</span> = <span class="title class_">NonNullable</span>&lt;<span class="variable constant_">T3</span>&gt; <span class="comment">// 对象是不行的</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>源码定义</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4.8版本之前的版本</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NonNullable</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="literal">null</span> | <span class="literal">undefined</span> ? <span class="built_in">never</span> : T;</span><br><span class="line"><span class="comment">// 4.8</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NonNullable</span>&lt;T&gt; = T &amp; &#123;&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><code>TS 4.8版本</code> 之前的就是用一个三元表达式来过滤 <code>null | undefined</code>。而在 <code>4.8</code> 版本直接就是 <code>T &amp; &#123;&#125;</code>，这是什么原理呢？其实是因为这个版本对 <code>--strictNullChecks</code> 做了增加，这主要体现还是在联合类型和交叉类型上，为什么这么说？</p>
<p>在 <code>js</code> 中都知道万物皆对象，原型链的最终点的正常对象就是 <code>Object</code> 了(<code>null</code> 算不正常的)，数据类型都是在原型链中继承于 <code>Object</code> 派生出来的。</p>
<p>在 <code>ts</code> 中也一样，由于 <code>&#123;&#125;</code> 是一个空对象，所以除了 <code>null</code> 和 <code>undefined</code> 之外的基础类型都可以视作继承于 <code>&#123;&#125;</code> 派生出来的。或者说如果一个值不是 <code>null</code> 和 <code>undefined</code> 就等于 <code>这个值 &amp; &#123;&#125;</code> 的结果，如下</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="string">&#x27;a&#x27;</span> &amp; &#123;&#125;;  <span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="built_in">number</span> &amp; &#123;&#125;;  <span class="comment">// number</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T3</span> = <span class="built_in">object</span> &amp; &#123;&#125;;  <span class="comment">// object</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T4</span> = &#123; <span class="attr">a</span>: <span class="built_in">string</span> &#125; &amp; &#123;&#125;;  <span class="comment">// &#123; a: string &#125;</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T5</span> = <span class="literal">null</span> &amp; &#123;&#125;;  <span class="comment">// never</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T6</span> = <span class="literal">undefined</span> &amp; &#123;&#125;;  <span class="comment">// never</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>如果 <code>T &amp; &#123;&#125;</code> 中的 <code>T</code> 不是 <code>null/undefined</code> 就可以认为它肯定符合 <code>&#123;&#125;</code> 类型，就可以把 <code>&#123;&#125;</code> 从交叉类型中去掉了，如果是，则会被判为 <code>never</code>，而 <code>never</code> 是会被忽略的(上面 <code>Exclude</code> 源码定义里有提到)，所以在结果里自然就排除掉了 <code>null</code> 和 <code>undefined</code>。</p>
<p>还有如果 <code>T &amp; &#123;&#125;</code> 中的 <code>T</code> 是联合类型，是会触发分发的，这个就不再解释了</p>
<h3 id="练习三"><a href="#练习三" class="headerlink" title="练习三"></a>练习三</h3><p>请实现一个能去掉对象类型中 <code>null</code> 和 <code>undefined</code> 的类型</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需要把如下类型变成 &#123; name: string &#125;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现如下</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ObjNonNullable</span>&lt;T&gt; = &#123; [P <span class="keyword">in</span> keyof T <span class="keyword">as</span> T[P] <span class="keyword">extends</span> <span class="literal">null</span> | <span class="literal">undefined</span> ? <span class="built_in">never</span> : P]: T[P] &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">ObjNonNullable</span>&lt;<span class="title class_">User</span>&gt;</span><br><span class="line"><span class="comment">// type T1 = &#123; name: string &#125;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>这里出现了一个本文第一次出现的关键字 <code>as</code>，我们知道它可以用来断言，在 <code>ts 4.1</code> 版本可以在映射类型里用 <code>as</code> 实现键名重新映射，达到过滤或者修改属性名的目的，如果指定的类型解析为 <code>never</code> 时，会被忽略不会生成这个属性</p>
<p>如上只能过滤对象第一层的 <code>null</code> 和 <code>undefined</code></p>
<p>如何更进一步改成可以递归的呢？</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">children</span>: &#123;</span><br><span class="line">        <span class="attr">boy</span>: <span class="built_in">number</span></span><br><span class="line">        <span class="attr">girl</span>: <span class="built_in">number</span></span><br><span class="line">        <span class="attr">neutral</span>: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 递归处理对象类型的 DeepNonNullable</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DeepNonNullable</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="built_in">object</span> ? &#123; [P <span class="keyword">in</span> keyof T <span class="keyword">as</span> T[P] <span class="keyword">extends</span> <span class="literal">null</span> | <span class="literal">undefined</span> ? <span class="built_in">never</span> : P]: <span class="title class_">DeepNonNullable</span>&lt;T[P]&gt; &#125; : T;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">DeepNonNullable</span>&lt;<span class="title class_">User</span>&gt;</span><br><span class="line"><span class="comment">// type T1 = &#123;</span></span><br><span class="line"><span class="comment">//    name: string;</span></span><br><span class="line"><span class="comment">//    children: &#123;</span></span><br><span class="line"><span class="comment">//        boy: number;</span></span><br><span class="line"><span class="comment">//        girl: number;</span></span><br><span class="line"><span class="comment">//    &#125;;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="Awaited"><a href="#Awaited" class="headerlink" title="Awaited"></a>Awaited</h3><p><code>Awaited&lt;T&gt;</code>：作用是获取 <code>async/await</code> 函数或 <code>promise</code> 的 <code>then()</code> 方法的返回值的类型。而且自带递归效果，如果是这样嵌套的异步方法，也能拿到最终的返回值类型</p>
<p>示例：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Awaited</span>&lt;<span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt;&gt;;</span><br><span class="line"><span class="comment">// type T1 = string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套 Promise，会递归</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">Awaited</span>&lt;<span class="title class_">Promise</span>&lt;<span class="title class_">Promise</span>&lt;<span class="built_in">number</span>&gt;&gt;&gt;;</span><br><span class="line"><span class="comment">// type T2 = number</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 联合类型，会触发分发</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T3</span> = <span class="title class_">Awaited</span>&lt;<span class="built_in">boolean</span> | <span class="title class_">Promise</span>&lt;<span class="built_in">number</span>&gt;&gt;;</span><br><span class="line"><span class="comment">// type T3 = number | boolean</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>来看下源码定义，看下到底是怎么执行的，是怎么拿到结果的呢？</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 源码定义</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Awaited</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="literal">null</span> | <span class="literal">undefined</span></span><br><span class="line">	? T</span><br><span class="line">	: T <span class="keyword">extends</span> <span class="built_in">object</span> &amp; &#123; <span class="title function_">then</span>(<span class="attr">onfulfilled</span>: infer F): <span class="built_in">any</span> &#125;</span><br><span class="line">		? F <span class="title function_">extends</span> (<span class="attr">value</span>: infer V, ...<span class="attr">args</span>: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span></span><br><span class="line">			? <span class="title class_">Awaited</span>&lt;V&gt;</span><br><span class="line">			: <span class="built_in">never</span></span><br><span class="line">		: T</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>泛型条件有点多，就换了下行，方便看</p>
<ul>
<li><p>如果 <code>T</code> 是 <code>null</code> 或 <code>undefined</code> 就直接返回 <code>T</code></p>
</li>
<li><p>如果 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">T</span><br></pre></td></tr></table></figure>

<p> 是对象类型，并且里面有 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">then</span><br></pre></td></tr></table></figure>

<p> 方法，就用 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">infer</span><br></pre></td></tr></table></figure>

<p> 类型推断出 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">then</span><br></pre></td></tr></table></figure>

<p> 方法的第一个参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onfulfilled</span><br></pre></td></tr></table></figure>

<p> 的类型赋值给 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F</span><br></pre></td></tr></table></figure>

<p>，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onfulfilled</span><br></pre></td></tr></table></figure>

<p> 其实就是我们熟悉的 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resolve</span><br></pre></td></tr></table></figure>

<p>。所以这里可以看出或者准确的说，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Awaited</span><br></pre></td></tr></table></figure>

<p> 拿的不是 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">then()</span><br></pre></td></tr></table></figure>

<p> 的返回值类型，而是 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resolve()</span><br></pre></td></tr></table></figure>

<p> 的返回值类型</p>
<ul>
<li><p>既然 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F</span><br></pre></td></tr></table></figure>

<p> 是回调函数 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resolve</span><br></pre></td></tr></table></figure>

<p> ，就推断出该函数第一个参数类型赋值给 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">V</span><br></pre></td></tr></table></figure>

<p> ，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resolve</span><br></pre></td></tr></table></figure>

<p> 的参数自然就是返回值</p>
<ul>
<li>传入 <code>V</code> 递归调用</li>
</ul>
</li>
<li><p><code>F</code> 不是函数就返回 <code>never</code></p>
</li>
</ul>
</li>
<li><p>如果 <code>T</code> 不是对象类型 或者 是对象但没有 <code>then</code> 方法，返回 <code>T</code> ，就是最后一行的 <code>T</code></p>
</li>
</ul>
<h3 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h3><p><code>Parameters&lt;T&gt;</code>：作用是获取函数所有参数的类型集合，返回的是元组。<code>T</code> 自然就是函数了</p>
<p>使用示例：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"><span class="attr">arg</span>: &#123; a: <span class="built_in">number</span>; b: <span class="built_in">string</span> &#125;</span>): <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有参数的函数</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Parameters</span>&lt;<span class="function">() =&gt;</span> <span class="built_in">string</span>&gt;;</span><br><span class="line"><span class="comment">// type T1 = []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个参数的函数</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">Parameters</span>&lt;<span class="function">(<span class="params"><span class="attr">s</span>: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>&gt;;</span><br><span class="line"><span class="comment">// type T2 = [s: string]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型参数的函数</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T3</span> = <span class="title class_">Parameters</span>&lt;&lt;T&gt;<span class="function">(<span class="params"><span class="attr">arg</span>: T</span>) =&gt;</span> T&gt;;</span><br><span class="line"><span class="comment">// type T3 = [arg: unknown]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// typeof f1 结果为 (arg: &#123; a: number; b: string &#125;) =&gt; void</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T4</span> = <span class="title class_">Parameters</span>&lt;<span class="keyword">typeof</span> f1&gt;;</span><br><span class="line"><span class="comment">// type T4 = [arg: &#123;</span></span><br><span class="line"><span class="comment">//     a: number;</span></span><br><span class="line"><span class="comment">//     b: string;</span></span><br><span class="line"><span class="comment">// &#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// any 和 never</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T5</span> = <span class="title class_">Parameters</span>&lt;<span class="built_in">any</span>&gt;;</span><br><span class="line"><span class="comment">// type T5 = unknown[]</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T6</span> = <span class="title class_">Parameters</span>&lt;<span class="built_in">never</span>&gt;;</span><br><span class="line"><span class="comment">// type T6 = never</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面这样传参是会报错的</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T7</span> = <span class="title class_">Parameters</span>&lt;<span class="built_in">string</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T8</span> = <span class="title class_">Parameters</span>&lt;<span class="title class_">Function</span>&gt;;</span><br><span class="line">复制代码</span><br><span class="line"><span class="comment">// 源码定义</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Parameters</span>&lt;T <span class="title function_">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = T <span class="title function_">extends</span> (...<span class="attr">args</span>: infer P) =&gt; <span class="built_in">any</span> ? P : <span class="built_in">never</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>可以看到限制了函数类型，然后 <code>...args</code> 取参数和 <code>js</code> 中的用法是一样的，<code>infer</code> 表示待推断的类型变量，打断出 <code>...args</code> 取到的类型赋值给 <code>P</code></p>
<h3 id="ReturnType"><a href="#ReturnType" class="headerlink" title="ReturnType"></a>ReturnType</h3><p><code>ReturnType&lt;T&gt;</code>：作用是获取函数返回值的类型。<code>T</code> 为函数</p>
<p>示例：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>): &#123; <span class="attr">a</span>: <span class="built_in">number</span>; <span class="attr">b</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">ReturnType</span>&lt;<span class="function">() =&gt;</span> <span class="built_in">string</span>&gt;;</span><br><span class="line"><span class="comment">// type T1 = string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">ReturnType</span>&lt;<span class="function">(<span class="params"><span class="attr">s</span>: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>&gt;;</span><br><span class="line"><span class="comment">// type T2 = void</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T3</span> = <span class="title class_">ReturnType</span>&lt;&lt;T&gt;<span class="function">() =&gt;</span> T&gt;;</span><br><span class="line"><span class="comment">// type T3 = unknown</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T4</span> = <span class="title class_">ReturnType</span>&lt;&lt;T <span class="keyword">extends</span> U, U <span class="keyword">extends</span> <span class="built_in">number</span>[]&gt;<span class="function">() =&gt;</span> T&gt;;</span><br><span class="line"><span class="comment">// type T4 = number[]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T5</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> f1&gt;;</span><br><span class="line"><span class="comment">// type T5 = &#123;</span></span><br><span class="line"><span class="comment">//     a: number;</span></span><br><span class="line"><span class="comment">//     b: string;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// any 和 never</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T6</span> = <span class="title class_">ReturnType</span>&lt;<span class="built_in">any</span>&gt;;</span><br><span class="line"><span class="comment">// type T6 = any</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T7</span> = <span class="title class_">ReturnType</span>&lt;<span class="built_in">never</span>&gt;;</span><br><span class="line"><span class="comment">// type T7 = never</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面这样是不行的</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T8</span> = <span class="title class_">ReturnType</span>&lt;<span class="built_in">string</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T9</span> = <span class="title class_">ReturnType</span>&lt;<span class="title class_">Function</span>&gt;;</span><br><span class="line">复制代码</span><br><span class="line"><span class="comment">// 源码定义</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReturnType</span>&lt;T <span class="title function_">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = T <span class="title function_">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>) =&gt; infer R ? R : <span class="built_in">any</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>可以看到源码定义上和 <code>Parameters</code> 是基本一样的，只是把类型推断的参数换成返回值了</p>
<h3 id="ConstructorParameters-InstanceType"><a href="#ConstructorParameters-InstanceType" class="headerlink" title="ConstructorParameters&#x2F;InstanceType"></a>ConstructorParameters&#x2F;InstanceType</h3><p>我们知道 <code>Parameters</code> 和 <code>ReturnType</code> 这一对是获取普通&#x2F;箭头函数的<strong>参数类型集合</strong>以及<strong>返回值类型</strong>的了，还有一对组合<code>ConstructorParameters</code> 和 <code>InstanceType</code> 是获取<strong>构造函数</strong>的参数类型集合以及<strong>返回值类型</strong>的，和上面的比较类似我就放到一起了</p>
<h3 id="Uppercase-Lowercase"><a href="#Uppercase-Lowercase" class="headerlink" title="Uppercase&#x2F;Lowercase"></a>Uppercase&#x2F;Lowercase</h3><p>这俩儿的作用是转换全部字母大小写</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Uppercase</span>&lt;<span class="string">&quot;abcd&quot;</span>&gt;</span><br><span class="line"><span class="comment">// type T1 = &quot;ABCD&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">Lowercase</span>&lt;<span class="string">&quot;ABCD&quot;</span>&gt;</span><br><span class="line"><span class="comment">// type T2 = &quot;abcd&quot;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="Capitalize-Uncapitalize"><a href="#Capitalize-Uncapitalize" class="headerlink" title="Capitalize&#x2F;Uncapitalize"></a>Capitalize&#x2F;Uncapitalize</h3><p>这俩儿的作用是转换首字母大小写</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">Capitalize</span>&lt;<span class="string">&quot;abcd efg&quot;</span>&gt;</span><br><span class="line"><span class="comment">// type T1 = &quot;Abcd efg&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">Uncapitalize</span>&lt;<span class="string">&quot;ABCD EFG&quot;</span>&gt;</span><br><span class="line"><span class="comment">// type T2 = &quot;aBCD EFG&quot;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="练习四"><a href="#练习四" class="headerlink" title="练习四"></a>练习四</h3><p>请实现一个类型，把对象类型中的属性名换成大写，需要注意的是对象属性名支持 <code>string | number | symbol</code> 三种类型</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User1</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="number">18</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现如下，只需调用现在的工具类型 Uppercase 就行了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 先取出所有字符串属性的出来，再处理返回 &#123; NAME: string, AGE: number &#125;</span></span><br><span class="line"><span class="comment">// type T1&lt;T&gt; = &#123; [P in keyof T &amp; string as Uppercase&lt;P&gt;]: T[P] &#125;</span></span><br><span class="line"><span class="comment">// 只处理字符串属性的，其他正常返回</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span>&lt;T&gt; = &#123; [P <span class="keyword">in</span> keyof T <span class="keyword">as</span> P <span class="keyword">extends</span> <span class="built_in">string</span> ? <span class="title class_">Uppercase</span>&lt;P&gt; : P]: T[P] &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="variable constant_">T1</span>&lt;<span class="title class_">User1</span>&gt;</span><br><span class="line"><span class="comment">// type T2 = &#123;</span></span><br><span class="line"><span class="comment">//     NAME: string;</span></span><br><span class="line"><span class="comment">//     AGE: number;</span></span><br><span class="line"><span class="comment">//     18: number</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="综合练习"><a href="#综合练习" class="headerlink" title="综合练习"></a>综合练习</h3><p>请实现一个类型，可以把下划线属性名的对象，换成驼峰属性名的对象。这个就没有现成的工具类型调用了，所以需要我们额外实现一个</p>
<p>这个练习用到了本文中的很多知识，先自己写一下咯</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User1</span> = &#123;</span><br><span class="line">    <span class="attr">my_name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">my_age_type</span>: <span class="built_in">number</span> <span class="comment">// 多个下划线</span></span><br><span class="line">    <span class="attr">my_children</span>: &#123;</span><br><span class="line">        <span class="attr">my_boy</span>: <span class="built_in">number</span></span><br><span class="line">        <span class="attr">my_girl</span>: <span class="built_in">number</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现如下</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="built_in">string</span></span><br><span class="line">	? T <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;infer A&#125;</span>_<span class="subst">$&#123;infer B&#125;</span>`</span></span><br><span class="line">		? <span class="string">`<span class="subst">$&#123;A&#125;</span><span class="subst">$&#123;T1&lt;Capitalize&lt;B&gt;&gt;&#125;</span>`</span> <span class="comment">// 这里有递归处理单个属性名多个下划线</span></span><br><span class="line">		: T</span><br><span class="line">	: T;</span><br><span class="line"><span class="comment">// 对象不递归</span></span><br><span class="line"><span class="comment">// type T2&lt;T&gt; = &#123; [P in keyof T as T1&lt;P&gt;]: T[P] &#125;</span></span><br><span class="line"><span class="comment">// 对象递归</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="built_in">object</span> ? &#123; [P <span class="keyword">in</span> keyof T <span class="keyword">as</span> <span class="variable constant_">T1</span>&lt;P&gt;]: <span class="variable constant_">T2</span>&lt;T[P]&gt; &#125; : T</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T3</span> = <span class="variable constant_">T2</span>&lt;<span class="title class_">User1</span>&gt;</span><br><span class="line"><span class="comment">// type T3 = &#123;</span></span><br><span class="line"><span class="comment">//     myName: string;</span></span><br><span class="line"><span class="comment">//     myAgeType: number;</span></span><br><span class="line"><span class="comment">//     myChildren: &#123;</span></span><br><span class="line"><span class="comment">//         myBoy: number;</span></span><br><span class="line"><span class="comment">//         myGirl: number;</span></span><br><span class="line"><span class="comment">//     &#125;;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>这个练习用到了 <code>extends</code>、<code>infer</code>、<code>as</code>、<code>循环</code>、<code>递归</code>，相信能更好地帮助我们理解和运用</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="https://link.juejin.cn/?target=https://www.typescriptlang.org/docs/handbook/utility-types.html">www.typescriptlang.org/docs/handbo…</a></p>
<p>原作者：沐华<br>链接：<a target="_blank" rel="noopener" href="https://juejin.cn/post/7170662948656906253">https://juejin.cn/post/7170662948656906253</a><br>来源：稀土掘金</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="../../../../index.html">首页</a></li>
        
          <li><a href="../../../../about/">关于</a></li>
        
          <li><a href="../../../../archives/">归档</a></li>
        
          <li><a target="_blank" rel="noopener" href="http://github.com/JamisonDong">项目</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Exclude"><span class="toc-number">1.</span> <span class="toc-text">Exclude</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Extract"><span class="toc-number">2.</span> <span class="toc-text">Extract</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Omit"><span class="toc-number">3.</span> <span class="toc-text">Omit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pick"><span class="toc-number">4.</span> <span class="toc-text">Pick</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E4%B8%80"><span class="toc-number">5.</span> <span class="toc-text">练习一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Record"><span class="toc-number">6.</span> <span class="toc-text">Record</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Partial"><span class="toc-number">7.</span> <span class="toc-text">Partial</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Required"><span class="toc-number">8.</span> <span class="toc-text">Required</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Readonly"><span class="toc-number">9.</span> <span class="toc-text">Readonly</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E4%BA%8C"><span class="toc-number">10.</span> <span class="toc-text">练习二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NonNullable"><span class="toc-number">11.</span> <span class="toc-text">NonNullable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E4%B8%89"><span class="toc-number">12.</span> <span class="toc-text">练习三</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Awaited"><span class="toc-number">13.</span> <span class="toc-text">Awaited</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parameters"><span class="toc-number">14.</span> <span class="toc-text">Parameters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ReturnType"><span class="toc-number">15.</span> <span class="toc-text">ReturnType</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ConstructorParameters-InstanceType"><span class="toc-number">16.</span> <span class="toc-text">ConstructorParameters&#x2F;InstanceType</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Uppercase-Lowercase"><span class="toc-number">17.</span> <span class="toc-text">Uppercase&#x2F;Lowercase</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Capitalize-Uncapitalize"><span class="toc-number">18.</span> <span class="toc-text">Capitalize&#x2F;Uncapitalize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E5%9B%9B"><span class="toc-number">19.</span> <span class="toc-text">练习四</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E7%BB%83%E4%B9%A0"><span class="toc-number">20.</span> <span class="toc-text">综合练习</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">21.</span> <span class="toc-text">参考资料</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&text=Typescript 泛型"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&title=Typescript 泛型"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&is_video=false&description=Typescript 泛型"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Typescript 泛型&body=Check out this article: https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&title=Typescript 泛型"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&title=Typescript 泛型"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&title=Typescript 泛型"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&title=Typescript 泛型"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&name=Typescript 泛型&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://jamisondong.github.io/2023/07/08/TS%E6%B3%9B%E5%9E%8B/&t=Typescript 泛型"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2026
    Jamsion Dong
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="../../../../index.html">首页</a></li><!--
     --><!--
       --><li><a href="../../../../about/">关于</a></li><!--
     --><!--
       --><li><a href="../../../../archives/">归档</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/JamisonDong">项目</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板！\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功！");
      e.clearSelection();
    })
  })
  </script>


<script src="../../../../js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
